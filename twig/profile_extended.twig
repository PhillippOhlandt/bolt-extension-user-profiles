{% import '_macro/_macro.twig' as macro %}

{% extends '_base/_page-nav.twig' %}

{% block page_nav 'Extended Profile' %}

{% block page_title %}

    Profile

{% endblock page_title %}

{% block page_subtitle %}

        {{ user.displayname }} » Extended

{% endblock page_subtitle %}

{% block page_main %}

    {% if message is not empty %}
        <div class="row">
            <div class="col-md-8">
                <div class="alert alert-success">
                    <button class="close" data-dismiss="alert">×</button>
                    {{ message }}
                </div>
            </div>
        </div>
    {% endif %}

    <div class="row">
        <div class="col-md-8 col-lg-6">
            <form action="{{ paths.current }}" method="POST" class="form-horizontal">
                {% for field, values in fields if user[field] is defined %}

                    {% set data = {
                        field:      values,
                        content:    user[field],
                        name:       field,
                        key:        field,
                    } %}

                    <div class="form-group">
                        {% if values.type == "text" %}
                            {% include 'field_text.twig' with data %}
                        {% elseif values.type == "textarea" %}
                            {% include 'field_textarea.twig' with data %}
                        {% elseif values.type == "checkbox" %}
                            {% include 'field_checkbox.twig' with data %}
                        {% else %}

                        {% endif %}
                    </div>
                {% endfor %}
                <input type="submit" value="Save user" class="btn btn-primary">
            </form>
        </div>
    </div>

{% endblock page_main %}
